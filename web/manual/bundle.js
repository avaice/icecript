(()=>{"use strict";var e={168:(e,r,t)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.functions=void 0;const n=t(253),i=t(397);r.functions={print:n.print,random:i.random}},571:(e,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.inputForBrowser=void 0,r.inputForBrowser=e=>{var r;return null!==(r=window.prompt(e))&&void 0!==r?r:""}},675:(e,r,t)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.listenWebEvent=void 0;const n=t(594);r.listenWebEvent=(e,r,t)=>{const i=document.querySelector(e);return!!i&&i.addEventListener(r,(()=>{(0,n.exec)(void 0,t)}))}},361:(e,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.movePage=void 0,r.movePage=(e,r)=>{if(r&&!r.match(/^[a-zA-Z0-9_]+$/))return!1;const t=new URL(window.location.href),n=new URLSearchParams(t.search);r&&n.set("id",r);const i=r?`?${n.toString()}`:"";history.pushState(null,"",i),document.title=e}},276:(e,r,t)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.writeHtml=void 0;const n=t(594);r.writeHtml=(e,r)=>{const t=document.querySelector(e);if(!t)return;t.innerHTML=r;const i=t.getElementsByTagName("a");for(const e of i){const r=e.href,t=new URL(r),i=new URLSearchParams(t.search).get("id");console.log(r,i),r.includes(location.href)&&i&&e.addEventListener("click",(e=>{e.preventDefault(),(0,n.exec)(void 0,i)}))}}},253:(e,r,t)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.print=void 0;const n=t(594);r.print=(e,...r)=>{(0,n.getInterceptForTest)()?(0,n.printInterceptor)(e,...r):console.log(e,...r)}},397:(e,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.random=void 0,r.random=e=>Math.floor(Math.random()*e)},153:function(e,r){var t=this&&this.__awaiter||function(e,r,t,n){return new(t||(t=Promise))((function(i,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function c(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var r;e.done?i(e.value):(r=e.value,r instanceof t?r:new t((function(e){e(r)}))).then(s,c)}l((n=n.apply(e,r||[])).next())}))};Object.defineProperty(r,"__esModule",{value:!0}),r.readTextForBrowser=void 0,r.readTextForBrowser=e=>t(void 0,void 0,void 0,(function*(){return yield fetch(e).then((e=>e.text()))}))},565:function(e,r,t){var n=this&&this.__awaiter||function(e,r,t,n){return new(t||(t=Promise))((function(i,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function c(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var r;e.done?i(e.value):(r=e.value,r instanceof t?r:new t((function(e){e(r)}))).then(s,c)}l((n=n.apply(e,r||[])).next())}))};Object.defineProperty(r,"__esModule",{value:!0}),r.interpriter=r.getPointer=void 0;const i=t(168),o=t(594);let s={},c={},l=0;r.getPointer=()=>l;const d=["==","&&",">","<","!=","||"],a=["true","false","monkey","void","flag"],u=Symbol("break");r.interpriter=(e,r="initial")=>n(void 0,void 0,void 0,(function*(){s={},c={},l=0;const t=c=>n(void 0,void 0,void 0,(function*(){for(var n;l<e.length;){const _=e[l];if(i.functions.hasOwnProperty(_))return yield f(_,c.scopedVariables);if("function"===(null===(n=s[_])||void 0===n?void 0:n.type))return yield y();if("var"===_)return yield v(c.scopedVariables);if("("===_)return yield w(c.scopedVariables);if("if"===_)return yield m({scopedVariables:c.scopedVariables});if("fn"===_)return c.scopedVariables&&(0,o.err)("Èñ¢Êï∞ÂÜÖ„ÅßÈñ¢Êï∞„ÇíÂÆ£Ë®Ä„Åô„Çã„Åì„Å®„ÅØ„Åß„Åç„Åæ„Åõ„ÇìÔºÅ"),yield p();if("while"===_)return yield g({scopedVariables:c.scopedVariables});if(a.includes(_))switch(_){case"true":return!0;case"false":return!1;case"monkey":return Math.random()>.5;case"flag":return r;default:return(0,o.err)("System Error! Â≠òÂú®„Åó„Å™„ÅÑ‰∫àÁ¥ÑË™û")}if(!(null==c?void 0:c.exprFlag)&&d.includes(e[l+1]))return yield V({scopedVariables:c.scopedVariables});if(!(null==c?void 0:c.exprFlag)&&["+","*","/"].includes(e[l+1]))return yield h({scopedVariables:c.scopedVariables});if("="===e[l+1])return yield b(c.scopedVariables);if(c.scopedVariables&&Object.keys(c.scopedVariables).includes(e[l]))return c.scopedVariables[e[l]];if(Object.keys(s).includes(e[l]))return s[e[l]];if(_.match(/".*"/)||_.match(/`([^`]+)`/))return _.slice(1,_.length-1);if(_.match(/^[0-9]?.?[0-9]/))return Number(_);if("}"===_)return;if("return"===_)return"void"===e[l+1]?{sym:u,value:void 0}:(l++,{sym:u,value:yield t({scopedVariables:c.scopedVariables})});if(![",","(",")",";","void"].includes(_)&&!_.startsWith("//"))return(0,o.err)(`${_}„ÅØÂÆöÁæ©„Åï„Çå„Å¶„ÅÑ„Å™„ÅÑÂëΩ‰ª§„Åß„ÅôÔºÅ`);l++}})),f=(r,s)=>n(void 0,void 0,void 0,(function*(){l++,"("!==e[l]&&(0,o.err)('Èñ¢Êï∞„ÅÆÂßã„ÇÅ„Å´ "(" „Åå„ÅÇ„Çä„Åæ„Åõ„Çì'),l++;const n=[];for(;l<e.length&&")"!==e[l];){const e=yield t({scopedVariables:s});void 0!==e&&n.push(e),l++}")"!==e[l]&&(0,o.err)('Èñ¢Êï∞„ÅÆÁµÇ„Çè„Çä„Å´ ")" „Åå„ÅÇ„Çä„Åæ„Åõ„Çì');const c=yield i.functions[r](...n);return["+","*","/"].includes(e[l+1])?yield h({leftArg:c,scopedVariables:s}):d.includes(e[l+1])?yield V({leftArg:c,scopedVariables:s}):c})),v=r=>n(void 0,void 0,void 0,(function*(){l++,a.includes(e[l])&&(0,o.err)(`"${e[l]}" „ÅØ„Ç∑„Çπ„ÉÜ„É†„ÅÆ‰∫àÁ¥ÑË™û„Å™„ÅÆ„Åß„ÄÅÂ§âÊï∞„Å´„ÅØ‰Ωø„Åà„Åæ„Åõ„Çì`),r?(Object.keys(r).includes(e[l])&&(0,o.err)(`ÂÆ£Ë®ÄÊ∏à„Åø„ÅÆÂ§âÊï∞ "${e[l]}" „ÇíÂÜçÂÆ£Ë®Ä„Åô„Çã„Åì„Å®„ÅØ„Åß„Åç„Åæ„Åõ„Çì`),r[e[l]]=void 0):(Object.keys(s).includes(e[l])&&(0,o.err)(`ÂÆ£Ë®ÄÊ∏à„Åø„ÅÆÂ§âÊï∞ "${e[l]}" „ÇíÂÜçÂÆ£Ë®Ä„Åô„Çã„Åì„Å®„ÅØ„Åß„Åç„Åæ„Åõ„Çì`),s[e[l]]=void 0),"="!==e[l+1]&&l++})),p=()=>n(void 0,void 0,void 0,(function*(){l++,(Object.keys(s).includes(e[l])||i.functions.hasOwnProperty(e[l]))&&(0,o.err)(`ÂÆ£Ë®ÄÊ∏à„Åø„ÅÆÂ§âÊï∞ "${e[l]}" „ÇíÂÜçÂÆ£Ë®Ä„Åô„Çã„Åì„Å®„ÅØ„Åß„Åç„Åæ„Åõ„Çì`),a.includes(e[l])&&(0,o.err)(`"${e[l]}" „ÅØ„Ç∑„Çπ„ÉÜ„É†„ÅÆ‰∫àÁ¥ÑË™û„Å™„ÅÆ„Åß„ÄÅÂ§âÊï∞„Å´„ÅØ‰Ωø„Åà„Åæ„Åõ„Çì`);const r=e[l];for(s[r]={type:"function",args:[],pointer:null},l++,"("!==e[l]&&(0,o.err)("Èñ¢Êï∞„ÅÆÂºïÊï∞ÂÆ£Ë®Ä„Åå„ÅÇ„Çä„Åæ„Åõ„Çì"),l++;")"!==e[l];)","!==e[l]&&s[r].args.push(e[l]),l++;l++,s[r].pointer=l,_(!1,void 0)})),y=()=>n(void 0,void 0,void 0,(function*(){const r=e[l],n=Symbol(r);c[n]={};const i=c[n];l++,"("!==e[l]&&(0,o.err)("Èñ¢Êï∞„ÅÆÂºïÊï∞ÂÆ£Ë®Ä„Åå„ÅÇ„Çä„Åæ„Åõ„Çì");let d=0;for(l++;")"!==e[l];)","!==e[l]&&(i[s[r].args[d]]=yield t({scopedVariables:void 0}),d++),l++;const a=l;l=s[r].pointer;const u=yield _(!0,i);return l=a,delete c[n],null==u?void 0:u.value})),b=r=>n(void 0,void 0,void 0,(function*(){const n=l;l+=2;const i=yield t({scopedVariables:r});r&&Object.keys(r).includes(e[n])?r[e[n]]=i:s[e[n]]=i,l++})),h=({leftArg:r,scopedVariables:i})=>n(void 0,void 0,void 0,(function*(){const n=e[l+1],o=null!=r?r:yield t({exprFlag:!0,scopedVariables:i});l+=2;const s=yield t({scopedVariables:i});switch(n){case"+":return o+s;case"*":return o*s;case"/":return o/s}})),w=r=>n(void 0,void 0,void 0,(function*(){l++;const n=yield t({scopedVariables:r});return l++,["+","*","/"].includes(e[l+1])?yield h({leftArg:n,scopedVariables:r}):d.includes(e[l+1])?yield V({leftArg:n,scopedVariables:r}):n})),m=({current:r,scopedVariables:i})=>n(void 0,void 0,void 0,(function*(){l++;const n=yield t({scopedVariables:i}),o=!r&&n;l++;const s=yield _(o,i);return"else"===e[l]?(l++,yield _(!r&&!o,i)):"elif"===e[l]?yield m({current:!!r||o,scopedVariables:i}):s})),g=e=>n(void 0,void 0,void 0,(function*(){const r=l;l++;const n=!!(yield t({scopedVariables:e}));l++;const i=yield _(n,e);return n&&!i?(l=r,yield g({scopedVariables:e})):i})),V=({leftArg:r,scopedVariables:i})=>n(void 0,void 0,void 0,(function*(){const n=e[l+1],o=null!=r?r:yield t({exprFlag:!0,scopedVariables:i});l+=2;const s=yield t({scopedVariables:i});switch(n){case"==":return o==s;case"&&":return o&&s;case"||":return!(!o&&!s);case"<":return o<s;case">":return o>s;case"!=":return o!=s}})),_=(r,i)=>n(void 0,void 0,void 0,(function*(){let n,o=0;for(;l<e.length;){if("{"===e[l])o++;else if("}"===e[l]){if(o--,0===o)break}else if(r&&!n){const e=yield t({scopedVariables:i});(null==e?void 0:e.sym)===u&&(n=e),l--}l++}return l++,n}));for(;l<e.length;)yield t({scopedVariables:void 0})}))},291:(e,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.tokenize=void 0,r.tokenize=e=>{const r=e.split(new RegExp(`(${/`[^`]+`|""|".[^"]*"| |\n|;|\/\/.*|{|}/.source}|${/==|&&|\|\||!=|[<>+*/=()]/.source})`)).map((e=>null==e?void 0:e.trim())).filter((e=>e&&!e.startsWith("//")));for(let e=0;e<r.length;e++)if(["*","/","==","!=","<",">"].includes(r[e])){if(")"!==r[e-1])r.splice(e-1,0,"(");else{let t=e-2,n=0;for(;t>=-1;t--)if(")"===r[t]&&n++,"("===r[t]&&(n--,-1===n)){r[t-1].match(/^[a-zA-Z0-9]+$/)?["if","elif","for","while"].includes(r[t-1])||r.splice(t-1,0,"("):r.splice(t,0,"(");break}}if(e+=1,"("!==r[e+1])r.splice(e+2,0,")");else{let t=e+2,n=0;for(;t<r.length;t++)if("("===r[t]&&n++,")"===r[t]&&(n--,-1===n)){r.splice(t,0,")");break}}e+=1}return r}},594:function(e,r,t){var n=this&&this.__awaiter||function(e,r,t,n){return new(t||(t=Promise))((function(i,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function c(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var r;e.done?i(e.value):(r=e.value,r instanceof t?r:new t((function(e){e(r)}))).then(s,c)}l((n=n.apply(e,r||[])).next())}))};Object.defineProperty(r,"__esModule",{value:!0}),r.exec=r.err=r.enviroment=r.printInterceptor=r.setInterceptForTest=r.getInterceptForTest=r.clearInterceptResult=r.getInterceptResult=void 0;const i=t(565),o=t(291);let s,c="",l=!1,d="";r.getInterceptResult=()=>d,r.clearInterceptResult=()=>d="",r.getInterceptForTest=()=>l,r.setInterceptForTest=e=>l=e,r.printInterceptor=(e,...r)=>{d=d+[e,...r].join(" ")+"\n"},r.enviroment="undefined"==typeof window?"node":"browser",r.err=e=>{const t=(0,i.getPointer)(),n=s.slice(Math.max(0,t-5),t+5).join(" ");throw"browser"===r.enviroment?(alert(`Error: ${t}\n      Ë©≤ÂΩì„Ç≥„Éº„ÉâËøëËæ∫: ${n}\n      ${e}`),new Error(e)):new Error(`[31m${e}\n${t}: ${n}[0m`)},r.exec=(e,r)=>n(void 0,void 0,void 0,(function*(){e?c=e:e=c,s=(0,o.tokenize)(e),yield(0,i.interpriter)(s,r)}))}},r={};function t(n){var i=r[n];if(void 0!==i)return i.exports;var o=r[n]={exports:{}};return e[n].call(o.exports,o,o.exports,t),o.exports}(()=>{const e=t(168),r=t(571),n=t(675),i=t(361),o=t(276),s=t(153),c=t(594);e.functions.input=r.inputForBrowser,e.functions.writeHtml=o.writeHtml,e.functions.movePage=i.movePage,e.functions.listenWebEvent=n.listenWebEvent,e.functions.readTextForBrowser=s.readTextForBrowser,window.icecript=c.exec})()})();